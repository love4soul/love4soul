
<!DOCTYPE html>
<!--[if IE 7]>
 <html class="ie ie7" lang="en-US">
 <![endif]-->
<!--[if IE 8]>
 <html class="ie ie8" lang="en-US">
 <![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
    <!--<![endif]-->
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="initial-scale=1" />
        <title>Chart Library </title>
        <!--[if lt IE 9]>
         <script src="/wp-content/themes/umstel/js/html5.js" type="text/javascript"></script>
         <![endif]-->
			<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		
        
                </head>
    <body>
        
        <script type="text/javascript" src="UmstelClient.js"></script>
        <div id="demo" style="width: 568px; height: 300px;">
        </div>
<script>
            var chart = umstelAPI.createChart('demo');

            if (chart.loaded) {
                buildChart();
            } else {
                chart.onload = function(crt) {
                    chart = crt;
                    buildChart();
                };
            }
            var last_past_price = 1.00276; // for demo purposes only
            var last_live_price = 1; // for demo purposes only

            var obj = {
                loadMore: function(time, request) {/*
                
                                    $.post("http://www.iresearchfx.com/wp-content/themes/umstel/demo-chart-past.php?time=" + time + '&last_price=' + last_past_price, function(data) {
                                        var result = JSON.parse(data);
                
                                        last_past_price = result.close;
                                        request.resolve({
                                            time: result.time,
                                            high: result.high,
                                            low: result.low,
                                            open: result.open,
                                            close: result.close,
                                            volume: result.volume
                                        });
                                    }).fail(function() {
                                        request.reject();
                                    });*/
                
                }
            };

            function buildChart() {
                chart.setSymbol('ABCXYZ');
                chart.setDescription('Example ABC vs XYZ');
                chart.setChartHistoryLoader(obj);
                chart.setSettings( 
					{
						b : {
							d : 2,
							n: {
								i1: { //main line color
									y: "#316396"
								},
								ji: { //main line width
									y: 1 //values from 1-5
								}
							} 
						},
						g: {
								n: {
									i1: { //main line color
										y: "#316396"
									},
									ji: { //main line width
										y: 1 //values from 1-5
									}
								}
							}
					}
				);
                chart.setRawData(false);
                chart.setDigits(5);
                chart.setPeriod(1);
                chart.setDataTime([1432634652,1432634712,1432634772,1432634832,1432634892,1432634952,1432635012,1432635072,1432635132,1432635192,1432635252,1432635312,1432635372,1432635432,1432635492,1432635552,1432635612,1432635672,1432635732,1432635792,1432635852,1432635912,1432635972,1432636032,1432636092,1432636152,1432636212,1432636272,1432636332,1432636392,1432636452,1432636512,1432636572,1432636632,1432636692,1432636752,1432636812,1432636872,1432636932,1432636992,1432637052,1432637112,1432637172,1432637232,1432637292,1432637352,1432637412,1432637472,1432637532,1432637592,1432637652,1432637712,1432637772,1432637832,1432637892,1432637952,1432638012,1432638072,1432638132,1432638192]);
                chart.setDataOpen([1.0026,1.00287,1.00267,1.00281,1.00252,1.00281,1.00285,1.00245,1.00226,1.00174,1.00181,1.00175,1.00164,1.00189,1.00145,1.00094,1.00049,1.00026,1.00002,1.00056,1.00049,1.00045,1.00037,1.00021,0.99996,0.99964,1.00013,0.99967,0.99914,0.99863,0.99903,0.99916,0.99876,0.99851,0.9982,0.99853,0.9986,0.99862,0.99838,0.99881,0.99931,0.99954,0.99919,0.99883,0.99931,0.99972,0.9997,1.00012,0.99997,0.99968,0.99949,0.99979,0.99985,0.99969,0.99923,0.99935,0.99985,0.99962,0.9996,1]);
                chart.setDataHigh([1.00316,1.0028,1.00297,1.00267,1.00321,1.00252,1.00291,1.00315,1.00245,1.00266,1.00194,1.00201,1.00205,1.00164,1.00219,1.00175,1.00124,1.00069,1.00066,1.00042,1.00076,1.00069,1.00045,1.00047,1.00041,1.00026,1.00004,1.00033,0.99967,0.99924,0.99873,0.99903,0.99956,0.99916,0.99881,0.9986,0.99873,0.9988,0.99902,0.99858,0.99921,0.99931,0.99994,0.99949,0.99923,0.99951,0.99982,0.9998,1.00052,1.00017,0.99978,0.99989,0.99999,1.00025,0.99979,0.99923,0.99945,1.00005,0.99992,0.9999]);
                chart.setDataLow([1.00256,1.0024,1.00247,1.00247,1.00261,1.00232,1.00281,1.00285,1.00225,1.00206,1.00144,1.00151,1.00165,1.00124,1.00189,1.00135,1.00074,1.00049,0.99986,1.00002,1.00026,1.00009,1.00035,1.00027,0.99991,0.99976,0.99934,1.00003,0.99937,0.99914,0.99823,0.99883,0.99876,0.99836,0.99831,0.9979,0.99813,0.9984,0.99832,0.99828,0.99841,0.99921,0.99914,0.99919,0.99883,0.99891,0.99942,0.9995,0.99992,0.99987,0.99928,0.99929,0.99979,0.99955,0.99929,0.99893,0.99905,0.99965,0.99932,0.9992]);
                chart.setDataClose([1.00276,1.0026,1.00287,1.00267,1.00281,1.00252,1.00281,1.00285,1.00245,1.00226,1.00174,1.00181,1.00175,1.00164,1.00189,1.00145,1.00094,1.00049,1.00026,1.00002,1.00056,1.00049,1.00045,1.00037,1.00021,0.99996,0.99964,1.00013,0.99967,0.99914,0.99863,0.99903,0.99916,0.99876,0.99851,0.9982,0.99853,0.9986,0.99862,0.99838,0.99881,0.99931,0.99954,0.99919,0.99883,0.99931,0.99972,0.9997,1.00012,0.99997,0.99968,0.99949,0.99979,0.99985,0.99969,0.99923,0.99935,0.99985,0.99962,0.9996]);
                chart.setDataVolume([25,47,33,41,15,42,37,38,32,44,7,13,31,42,21,27,27,22,25,3,24,26,27,39,5,32,40,35,9,20,31,5,49,39,3,1,13,27,43,31,8,47,29,25,15,29,8,2,1,41,19,38,29,32,37,21,34,42,3,43]);
                chart.build();

 /*               
				setInterval(function() {
                     $.post("http://www.iresearchfx.com/wp-content/themes/umstel/demo-chart-live.php?last_price=" + last_live_price, function(data) {
                          var result = JSON.parse(data);
                          last_live_price = result.ask; // demo use only
                          chart.updateLiveData(result.time, result.bid, result.ask, result.volume);
                      });
                  }, 1000);
					*/
  

            }

            // removes a TA by array key
            function removeTA(key) {
                var tas = chart.getTAs();
                tas[key].remove();
            }

            // removes an Indicator by array key
            function removeIndicator(key) {
                var indicators = chart.getIndicators();
                indicators[key].remove();
            }

            function populateChartList() {
                console.log(chart.getTAs());

                // clear the list
                $('#chart-item-list').html('');

                // add TAs to list
                var tas = chart.getTAs();
                for(var i in tas) {
                    $('#chart-item-list').append( '<li><div>' + tas[i].getName() +' <input class="btn btn-primary remove-chart-item ' + tas[i].getName() +'" type="button" onclick="removeTA(' + i + ');" value="x" /></div></li>');
                }

                // add indicators to list
                var indicators = chart.getIndicators();
                for(var i in indicators) {
                    $('#chart-item-list').append( '<li><div>' + indicators[i].getName() +'<input class="btn btn-primary remove-chart-item" type="button" onclick="removeIndicator(' + i + ');" value="x" /></div></li>');
                }
            }
                    </script>
        
            
    </body>
</html>